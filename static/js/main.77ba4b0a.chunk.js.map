{"version":3,"sources":["components/IdleInputs/index.tsx","components/RunningControls/index.tsx","components/IdleInputs/SetupFocus.tsx","components/IdleInputs/SetupBreak.tsx","components/CountdownTimer.tsx","components/RunningControls/AddDistraction.tsx","components/Status.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ScreenState","SetupFocus","props","startFocus","cancel","defaultFocusType","useState","goal","setGoal","duration","setDuration","type","setType","onSubmit","e","preventDefault","handleSubmit","htmlFor","accessKey","autoFocus","id","onChange","target","value","parseInt","FocusType","Personal","checked","Work","onClick","SetupBreak","suggestedDuration","breakType","startBreak","description","setDescription","IdleInputs","shortBreakMinutes","longBreakMinutes","Idle","screenState","setScreenState","suggestedBreakDuration","setSuggestedBreakDuration","BreakType","Short","selectedBreakType","setSelectedBreakType","setupBreak","Fragment","Long","console","error","CountdownTimer","timeRemaining","totalSecondsRemaining","pastDue","Math","abs","minutesRemaining","floor","secondsRemaining","paddedMinutesRemaining","paddedSecondsRemaining","formatTimeRemaining","end","current","style","fontSize","AddDistraction","addDistraction","defaultDistractionType","distractionDescription","setDistractionDescription","distractionType","setDistractionType","DistractionType","Internal","External","RunningControls","stopActivity","Default","stopTimeString","setStopTimeString","AddingDistraction","StoppingActivity","Date","toLocaleString","stopTime","parse","placeholder","favicon","title","Status","activity","currentTime","icon","scheduledEnd","ActivityType","Focus","newTitle","status","Break","emoji","iconLink","document","querySelector","href","updateFavicon","className","marginBottom","CurrentState","getUnixTime","now","minutesToSeconds","minutes","deepCopy","thing","JSON","stringify","prettifyTimes","key","intervalId","undefined","App","currentState","activities","setActivities","setCurrentTime","currentActivity","setCurrentActivity","lastUsedDistractionType","setLastUsedDistractionType","lastUsedFocusType","setLastUsedFocusType","useEffect","latestTag","tags","latestDistraction","distractions","length","activitiesJson","localStorage","getItem","parsedActivities","currentActivityJson","parsedActivity","setItem","Focusing","Relaxing","Idling","window","setInterval","newTime","clearInterval","checkedNotificationPermissions","setCheckedNotificationPermissions","Notification","permission","requestPermission","controls","timer","hasNotifiedTimout","setHasNotifiedTimout","requireInteraction","start","activityCopy","push","activitiesCopy","Array","from","reverse","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.77ba4b0a.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport SetupFocus from './SetupFocus';\nimport SetupBreak from './SetupBreak';\nimport { BreakType, FocusType } from '../../App';\n\nenum ScreenState {\n  Idle,\n  SetupFocus,\n  SetupBreak,\n}\n\ntype IdleInputsProps = {\n    startFocus: (description: string, duration: number, type: string[])=>void,\n    startBreak: (description: string, duration: number, breakType: BreakType)=>void,\n    shortBreakMinutes: number,\n    longBreakMinutes: number,\n    defaultFocusType: FocusType\n}\n\nexport default function IdleInputs(props : IdleInputsProps) {\n    const {startFocus, startBreak, defaultFocusType, shortBreakMinutes, longBreakMinutes} = props;\n    const [screenState, setScreenState] = useState(ScreenState.Idle);\n    const [suggestedBreakDuration, setSuggestedBreakDuration] = useState(0);\n    const [selectedBreakType, setSelectedBreakType] = useState(BreakType.Short);\n\n    function setupBreak(suggestedDuration : number, breakType: BreakType) {\n        setSuggestedBreakDuration(suggestedDuration);\n        setSelectedBreakType(breakType);\n        setScreenState(ScreenState.SetupBreak);\n    }\n\n    switch(screenState){\n        case ScreenState.Idle:\n            return(\n                <React.Fragment>\n                    <button autoFocus accessKey=\"o\" onClick={() => setScreenState(ScreenState.SetupFocus)}>F<u>o</u>cus</button>\n                    <button accessKey=\"h\" onClick={() => setupBreak(shortBreakMinutes, BreakType.Short)}>S<u>h</u>ort Break</button>\n                    <button accessKey=\"l\" onClick={() => setupBreak(longBreakMinutes, BreakType.Long)}><u>L</u>ong Break</button>\n                </React.Fragment>\n            );\n        case ScreenState.SetupFocus:\n            return(\n                <SetupFocus startFocus={startFocus} defaultFocusType={defaultFocusType} cancel={()=>setScreenState(ScreenState.Idle)} />\n            );\n        case ScreenState.SetupBreak:\n            return(\n                <SetupBreak startBreak={startBreak} breakType={selectedBreakType} suggestedDuration={suggestedBreakDuration} cancel={()=>setScreenState(ScreenState.Idle)} />\n            );\n        default:\n            console.error(`Unknown state for idle inputs: ${screenState}`)\n            return(\n                <React.Fragment/>\n            );\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport { DistractionType } from '../../App';\nimport AddDistraction from './AddDistraction';\n\ntype RunningControlsProps = {\n    addDistraction: (description: string, type: DistractionType)=>void,\n    stopActivity: (time: number)=>void,\n    defaultDistractionType: DistractionType,\n}\n\nenum ScreenState {\n    Default,\n    AddingDistraction,\n    StoppingActivity\n}\n\nfunction getCurrentTime() {\n    return Math.floor(Date.now() / 1000 );\n}\n\nexport default function RunningControls(props : RunningControlsProps){\n    const {addDistraction, stopActivity, defaultDistractionType} = props;\n\n    const [screenState, setScreenState] = useState(ScreenState.Default);\n\n    const [stopTimeString, setStopTimeString] = useState(\"\");\n    \n    function handleStopActivity(e : React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        const stopTime = Date.parse(stopTimeString);\n        if(stopTime) {\n            stopActivity(Math.floor(stopTime / 1000));\n        } else {\n            setStopTimeString((new Date()).toLocaleString());\n        }\n    }\n\n    function handleAddDistraction(distractionDescription: string, distractionType: DistractionType) {\n        addDistraction(distractionDescription, distractionType);\n        setScreenState(ScreenState.Default);\n    }\n\n    switch(screenState) {\n        case ScreenState.Default:\n            return(\n                <React.Fragment>\n                    <button autoFocus accessKey=\"d\" onClick={()=>setScreenState(ScreenState.AddingDistraction)}>A<u>d</u>d Distraction</button>\n                    <button\n                      accessKey=\"n\"\n                      onClick={()=>{setScreenState(ScreenState.StoppingActivity); setStopTimeString((new Date()).toLocaleString())}}>\n                      E<u>n</u>d Activity\n                    </button>\n                </React.Fragment>\n            );\n        case ScreenState.AddingDistraction:\n            return(\n                <AddDistraction\n                  addDistraction={handleAddDistraction}\n                  cancel={()=>setScreenState(ScreenState.Default)}\n                  defaultDistractionType={defaultDistractionType}/>\n            );\n        case ScreenState.StoppingActivity:\n            return(\n                <form onSubmit={handleStopActivity}>\n                    <label htmlFor=\"stopTime\" accessKey=\"t\">S<u>t</u>op time:</label>\n                    <input autoFocus id=\"stopTime\" type=\"text\" placeholder=\"Stop time...\" value={stopTimeString} onChange={e=>setStopTimeString(e.target.value)}/>\n                    <button accessKey=\"c\" type=\"submit\"><u>C</u>onfirm</button>\n                    <button accessKey=\"b\" onClick={()=>setScreenState(ScreenState.Default)}><u>B</u>ack</button>\n                </form>\n            )\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport { FocusType } from '../../App';\n\ntype SetupFocusProps = {\n    startFocus: (description: string, duraction: number, type: string[])=>void,\n    cancel: ()=>void,\n    defaultFocusType: FocusType\n}\n\nexport default function SetupFocus(props : SetupFocusProps) {\n    const {startFocus, cancel, defaultFocusType} = props;\n\n    const [goal, setGoal] = useState(\"\");\n    const [duration, setDuration] = useState(25);\n    const [type, setType] = useState(defaultFocusType);\n\n    function handleSubmit(e : React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        startFocus(goal, duration, [type])\n    }\n\n    return(\n        <form onSubmit={e => handleSubmit(e)}>\n            <label htmlFor=\"pomGoal\" accessKey=\"g\"><u>G</u>oal:</label>\n            <input autoFocus id=\"pomGoal\" type=\"text\" onChange={(e)=>setGoal(e.target.value)} value={goal}/>\n            <label htmlFor=\"pomDuration\" accessKey=\"d\"><u>D</u>uration:</label>\n            <input id=\"pomDuration\" type=\"text\" onChange={(e)=>setDuration(parseInt(e.target.value) || 0)} value={duration}/>\n            <label accessKey=\"p\"><input type=\"Radio\" value={FocusType.Personal} checked={type === FocusType.Personal} onChange={()=>{setType(FocusType.Personal)}}/><u>P</u>ersonal</label>\n            <label accessKey=\"o\"><input type=\"Radio\" value={FocusType.Work} checked={type === FocusType.Work} onChange={()=>{setType(FocusType.Work)}}/>W<u>o</u>rk</label>\n            <button accessKey=\"s\" type=\"submit\"><u>S</u>tart</button>\n            <button accessKey=\"b\" onClick={cancel}><u>B</u>ack</button>\n        </form>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { BreakType } from '../../App';\n\ntype SetupBreakProps = {\n    suggestedDuration: number,\n    breakType: BreakType,\n    startBreak: (description: string, duration: number, breakType: BreakType)=>void,\n    cancel: ()=>void\n}\n\nexport default function SetupBreak(props : SetupBreakProps) {\n    const {suggestedDuration, breakType, startBreak, cancel} = props;\n    const [description, setDescription] = useState<string>(breakType);\n    const [duration, setDuration] = useState(suggestedDuration);\n\n    function handleSubmit(e : React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        startBreak(description, duration, breakType);\n    }\n\n    return(\n        <form onSubmit={e => handleSubmit(e)}>\n            <label htmlFor=\"breakDescription\" accessKey=\"c\">Des<u>c</u>ription</label>\n            <input type=\"text\" id=\"breakDescription\" onChange={(e)=>setDescription(e.target.value)} value={description}/>\n            <label htmlFor=\"breakDuration\" accessKey=\"d\"><u>D</u>uration</label>\n            <input autoFocus id=\"breakDuration\" type=\"text\" onChange={(e)=>setDuration(parseInt(e.target.value) || 0)} value={duration}/>\n            <button accessKey=\"t\" type=\"submit\">S<u>t</u>art</button>\n            <button accessKey=\"b\" onClick={cancel}><u>B</u>ack</button>\n        </form>\n    )\n}","import React, { useEffect, useState } from 'react';\n\ntype CountdownTimerProps = {\n    end : number,\n    current : number\n}\n\nfunction formatTimeRemaining(totalSecondsRemaining : number) {\n    const pastDue = totalSecondsRemaining < 0;\n    totalSecondsRemaining = Math.abs(totalSecondsRemaining);\n    const minutesRemaining = Math.floor(totalSecondsRemaining / 60);\n    const secondsRemaining = totalSecondsRemaining % 60;\n    const paddedMinutesRemaining = minutesRemaining < 10 ? (\"0\" + minutesRemaining) : (\"\" + minutesRemaining);\n    const paddedSecondsRemaining = secondsRemaining < 10 ? (\"0\" + secondsRemaining) : (\"\" + secondsRemaining);\n    return `${pastDue ? \"-\" : \" \"}${paddedMinutesRemaining}:${paddedSecondsRemaining}`;\n}\n\nexport default function CountdownTimer(props : CountdownTimerProps) {\n    const {end, current} = props;\n    const timeRemaining = formatTimeRemaining(end - current);\n    return (\n        <pre style={{fontSize: 'xx-large'}}>\n            {timeRemaining}\n        </pre>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { DistractionType } from '../../App';\n\ntype AddDistractionProps = {\n    addDistraction: (description: string, type: DistractionType)=>void,\n    cancel: ()=>void,\n    defaultDistractionType: DistractionType,\n}\n\nexport default function AddDistraction(props : AddDistractionProps) {\n    const {addDistraction, cancel, defaultDistractionType} = props;\n    const [distractionDescription, setDistractionDescription] = useState(\"\");\n    const [distractionType, setDistractionType] = useState(defaultDistractionType);\n\n    function handleSubmit(e : React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        addDistraction(distractionDescription, distractionType);\n    }\n\n    return(\n        <form onSubmit={handleSubmit}>\n            <label htmlFor=\"distractionDescription\" accessKey=\"d\"><u>D</u>istraction description:</label>\n            <input autoFocus id=\"distractionDescription\" type=\"text\" onChange={(e)=>setDistractionDescription(e.target.value)} value={distractionDescription}/>\n            <label accessKey=\"i\"><input type=\"radio\" value={DistractionType.Internal} checked={distractionType === DistractionType.Internal} onChange={()=>setDistractionType(DistractionType.Internal)}/><u>I</u>nternal</label>\n            <label accessKey=\"x\"><input type=\"radio\" value={DistractionType.External} checked={distractionType === DistractionType.External} onChange={()=>setDistractionType(DistractionType.External)}/>E<u>x</u>ternal</label>\n            <button accessKey=\"a\" type=\"submit\"><u>A</u>dd</button>\n            <button accessKey=\"b\" onClick={cancel}><u>B</u>ack</button>\n        </form>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { Activity, ActivityType } from '../App';\nimport './Status.css';\n\ntype StatusProps = {\n    activity: Activity | null\n    currentTime: number\n}\n\nlet favicon = \"\";\nfunction updateFavicon(emoji : string) {\n    if (favicon !== emoji) {\n        favicon = emoji;\n        const iconLink = document.querySelector<HTMLLinkElement>(\"link[rel=icon]\");\n        if (iconLink) {\n            iconLink.href = `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${favicon}</text></svg>`\n        } else {\n            console.error(\"Could not find favicon link tag\");\n        }\n    } \n}\n\nlet title = \"\";\nfunction updateTitle(newTitle : string) {\n    if (newTitle !== title) {\n        title = newTitle;\n        document.title = newTitle;\n    } \n}\n\nexport default function Status(props : StatusProps) {\n    const {activity, currentTime} = props;\n    \n    let icon = \"\";\n    if(activity === null) {\n        icon = \"💤\";\n    } else if(activity.scheduledEnd > currentTime) {\n        icon = activity.type === ActivityType.Focus ? \"🤔\" : \"😎\";\n    } else {\n        icon = \"⌛\";\n    }\n    \n    let status = \"\";\n    if(activity === null) {\n        status = \"Idling...\"\n    } else if(activity.type === ActivityType.Break) {\n        status = \"Relaxing...\"\n    } else if(activity.type === ActivityType.Focus) {\n        status = `Focusing on ${activity.goal}...`\n    }\n\n\n    updateFavicon(icon);\n    updateTitle(status);\n    return(\n        <div className=\"Status\">\n            <h1 style={{marginBottom: 0}}>{`${icon} ${title}`}</h1>\n        </div>\n    );\n}","import React, { ReactElement, useEffect, useState } from 'react';\nimport './App.css';\nimport IdleInputs from './components/IdleInputs/index';\nimport CountdownTimer from './components/CountdownTimer';\nimport RunningControls from './components/RunningControls';\nimport Status from './components/Status';\n\nconst POM_MINUTES = 25;\nconst SHORT_BREAK_MINUTES = 5;\nconst LONG_BREAK_MINUTES = 15;\n\n\nexport enum ActivityType {\n  Focus = \"focus\",\n  Break = \"break\" \n};\nexport enum DistractionType { \n  Internal = 'internal',\n  External = 'external'\n};\nexport enum BreakType {\n  Short = 'short break',\n  Long = 'long break'\n};\nexport enum FocusType{\n    Personal = \"personal\",\n    Work = \"work\"\n}\n\ntype Distraction = {\n  description: string,\n  type: DistractionType\n}\n\nexport type Activity = {\n  start: number,\n  scheduledEnd: number;\n  end: number | null,\n  type: ActivityType,\n  goal: string,\n  distractions: Distraction[],\n  tags: string[]\n}\n\nenum CurrentState {\n  Idling = 'idling',\n  Focusing = 'focusing',\n  Relaxing = 'relaxing',\n};\n\nfunction getUnixTime() : number {\n  return Math.floor(Date.now() / 1000);\n}\n\nfunction minutesToSeconds(minutes : number) {\n  return minutes * 60;\n}\n\nfunction deepCopy<T>(thing: T): T {\n  return JSON.parse(JSON.stringify(thing));\n}\n\nfunction prettifyTimes(key : string, value : any) {\n  if((key === 'start' || key === 'scheduledEnd' || key === 'end') && value) {\n    return (new Date(value * 1000)).toLocaleString();\n  }\n  return value;\n}\n\nlet intervalId : undefined | number = undefined;\n\nfunction App() {\n\n  const [activities, setActivities] = useState<Activity[]>([]);\n  const [currentTime, setCurrentTime] = useState(getUnixTime());\n  const [currentActivity, setCurrentActivity] = useState<Activity | null>(null);\n  const [lastUsedDistractionType, setLastUsedDistractionType] = useState(DistractionType.Internal);\n  const [lastUsedFocusType, setLastUsedFocusType] = useState(FocusType.Work);\n\n  //update the last used distraction and activity type\n  useEffect(()=>{\n    if(!currentActivity)\n      return;\n\n    const latestTag = currentActivity.tags[0];\n    const latestDistraction = currentActivity.distractions[currentActivity.distractions.length - 1];\n\n    if(currentActivity.type === ActivityType.Focus && latestTag && latestTag !== lastUsedFocusType)\n      setLastUsedFocusType(latestTag as FocusType);\n    if(latestDistraction && latestDistraction.type != lastUsedDistractionType) {\n      setLastUsedDistractionType(latestDistraction.type);\n    }\n  }, [currentActivity]);\n\n  //load from local storage on page load\n  useEffect(()=>{\n    const activitiesJson = localStorage.getItem('activities');\n    if(activitiesJson) {\n      const parsedActivities = JSON.parse(activitiesJson) as Activity[];\n      setActivities(parsedActivities);\n    }\n\n    const currentActivityJson = localStorage.getItem('currentActivity');\n    if(currentActivityJson) {\n      const parsedActivity = JSON.parse(currentActivityJson) as Activity;\n      setCurrentActivity(parsedActivity);\n    }\n  }, []);\n\n  //save activities when updated\n  useEffect(()=>{\n    localStorage.setItem(\"activities\", JSON.stringify(activities));\n  }, [activities]);\n\n  //save currentActivity when updated\n  useEffect(()=>{\n    localStorage.setItem(\"currentActivity\", JSON.stringify(currentActivity));\n  }, [currentActivity]);\n\n  let currentState : CurrentState;\n  if(currentActivity && currentActivity.end === null){\n    switch(currentActivity.type){\n      case ActivityType.Focus:\n        currentState = CurrentState.Focusing;\n        break;\n      case ActivityType.Break:\n        currentState = CurrentState.Relaxing;\n        break;\n      default:\n        console.error(`Unknown activity type: ${currentActivity.type}`);\n        currentState = CurrentState.Idling;\n    }\n  } else {\n    currentState = CurrentState.Idling;\n  }\n\n  // set the internal timer\n  useEffect(() => {\n    if(intervalId === undefined) {\n      intervalId = window.setInterval(()=>{\n        const newTime = getUnixTime();\n        if(newTime > currentTime){\n          setCurrentTime(newTime);\n        }\n      }, 500);\n    }\n    return () => {\n      window.clearInterval(intervalId);\n      intervalId = undefined;\n    };\n  });\n\n  // check that notifications are setup\n  const [checkedNotificationPermissions, setCheckedNotificationPermissions] = useState(false);\n  useEffect(() => {\n    if(!checkedNotificationPermissions) {\n      if(Notification.permission !== \"granted\"){\n        Notification.requestPermission();\n      }\n      setCheckedNotificationPermissions(true);\n    }\n  });\n\n  //send notification if time has expired\n  const [hasNotifiedTimout, setHasNotifiedTimout] = useState(false);\n  useEffect(() => {\n    if(currentState !== CurrentState.Idling && currentActivity && currentTime > currentActivity.scheduledEnd && !hasNotifiedTimout) {\n      new Notification(`${currentActivity.type} time complete`, {requireInteraction: true});\n      setHasNotifiedTimout(true);\n    }\n  });\n\n  //set current activity to focus\n  function startFocus(goal: string, duration: number, tags: string[]){\n    const start = getUnixTime();\n    const scheduledEnd = start + minutesToSeconds(duration);\n    const activity : Activity = {\n      start,\n      end: null,\n      scheduledEnd,\n      goal,\n      tags,\n      type: ActivityType.Focus,\n      distractions: []\n    }\n    setCurrentActivity(activity);\n    setHasNotifiedTimout(false);\n  }\n\n  //set current activity to a break\n  function startBreak(description: string, minutes: number, breakType: BreakType){\n    const start = getUnixTime();\n    const scheduledEnd = start + minutesToSeconds(minutes);\n    const activity : Activity = {\n      start,\n      end: null,\n      scheduledEnd,\n      type: ActivityType.Break,\n      goal: description,\n      tags: [breakType],\n      distractions: [],\n    }\n    setCurrentActivity(activity);\n    setHasNotifiedTimout(false);\n  }\n\n  function addDistraction(description: string, type: DistractionType) {\n    if(!currentActivity) {\n      console.error(\"trying to add a distraction when no activity is in progress\");\n      return;\n    }\n    const activityCopy = deepCopy(currentActivity);\n    if(!activityCopy.distractions) {\n      activityCopy.distractions = [];\n    }\n    activityCopy.distractions.push({\n      description,\n      type\n    });\n    setCurrentActivity(activityCopy);\n  }\n\n  function stopActivity(stopTime: number) {\n    if(!currentActivity) {\n      console.error(\"trying to stop an activity when no activity is in progress\");\n      return;\n    }\n    const activityCopy = deepCopy(currentActivity);\n    const activitiesCopy = Array.from(activities);\n    activityCopy.end = stopTime;\n    activitiesCopy.push(activityCopy);\n    setActivities(activitiesCopy);\n    setCurrentActivity(null);\n  }\n\n  let controls : JSX.Element;\n  switch(currentState) {\n    case CurrentState.Idling:\n      controls = (\n        <IdleInputs\n          startFocus={startFocus}\n          startBreak={startBreak}\n          shortBreakMinutes={SHORT_BREAK_MINUTES}\n          longBreakMinutes={LONG_BREAK_MINUTES} \n          defaultFocusType={lastUsedFocusType}\n        />\n      )\n      break;\n    case CurrentState.Focusing:\n    case CurrentState.Relaxing:\n      controls = <RunningControls addDistraction={addDistraction} stopActivity={stopActivity} defaultDistractionType={lastUsedDistractionType} />\n      break;\n    default:\n      console.error(`Unsupported currentState: ${currentState}`)\n      controls = <React.Fragment/>\n  }\n\n  let timer : JSX.Element;\n  if(currentActivity && currentState != CurrentState.Idling) {\n      timer = (<CountdownTimer end={currentActivity.scheduledEnd} current={currentTime}/>);\n  } else {\n      timer = ( <CountdownTimer end={0} current={0}/> );\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>\n          yapt: yet another pomodoro timer\n        </p>\n      </header>\n      <div className=\"App-body\">\n        <Status activity={currentActivity} currentTime={currentTime}/>\n        <div className=\"Timer-controls\">\n          {timer}\n          {controls}\n        </div>\n        <hr/>\n        <h2>Current Activity</h2>\n        <pre>\n          {JSON.stringify(currentActivity, prettifyTimes, 2)}\n        </pre>\n        <hr/>\n        <h2>Previous Activities</h2>\n        <pre>\n          {JSON.stringify(Array.from(activities).reverse(), prettifyTimes, 2)}\n        </pre>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}