(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,r,i,s=n(1),a=n.n(s),o=n(4),u=n.n(o),l=(n(9),n(2)),j=(n(10),n(0));function d(e){var t=Object(s.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1],a=Object(s.useState)(c.Work),o=Object(l.a)(a,2),u=o[0],d=o[1];return Object(j.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.startFocus(r,[u])}(t)},children:[Object(j.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Goal",onChange:function(e){return i(e.target.value)},value:r}),Object(j.jsxs)("label",{accessKey:"p",children:[Object(j.jsx)("input",{type:"Radio",value:c.Personal,checked:u===c.Personal,onChange:function(){d(c.Personal)}}),Object(j.jsx)("u",{children:"P"}),"ersonal"]}),Object(j.jsxs)("label",{accessKey:"o",children:[Object(j.jsx)("input",{type:"Radio",value:c.Work,checked:u===c.Work,onChange:function(){d(c.Work)}}),"W",Object(j.jsx)("u",{children:"o"}),"rk"]}),Object(j.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(j.jsx)("u",{children:"S"}),"tart"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:e.cancel,children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]})}function b(e){var t=e.startFocus,n=e.startBreak,c=e.shortBreakMinutes,i=e.longBreakMinutes,o=Object(s.useState)(r.Idle),u=Object(l.a)(o,2),b=u[0],f=u[1];switch(b){case r.Idle:return Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsxs)("button",{autoFocus:!0,accessKey:"o",onClick:function(){return f(r.SetupFocus)},children:["F",Object(j.jsx)("u",{children:"o"}),"cus"]}),Object(j.jsxs)("button",{accessKey:"s",onClick:function(){return n(c)},children:[Object(j.jsx)("u",{children:"S"}),"hort Break"]}),Object(j.jsxs)("button",{accessKey:"l",onClick:function(){return n(i)},children:[Object(j.jsx)("u",{children:"L"}),"ong Break"]})]});case r.SetupFocus:return Object(j.jsx)(d,{startFocus:t,cancel:function(){return f(r.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(b)),Object(j.jsx)(a.a.Fragment,{})}}function f(e){var t=function(e){var t=e<0;e=Math.abs(e);var n=Math.floor(e/60),c=e%60,r=n<10?"0"+n:""+n,i=c<10?"0"+c:""+c;return"".concat(t?"-":" ").concat(r,":").concat(i)}(e.end-e.current);return Object(j.jsx)("pre",{style:{fontSize:"xx-large"},children:t})}function O(e){var t=e.addDistraction,n=e.stopActivity,c=Object(s.useState)(i.Default),r=Object(l.a)(c,2),o=r[0],u=r[1],d=Object(s.useState)(""),b=Object(l.a)(d,2),f=b[0],O=b[1],h=Object(s.useState)(v.Internal),x=Object(l.a)(h,2),p=x[0],g=x[1],y=Object(s.useState)(""),S=Object(l.a)(y,2),k=S[0],m=S[1];switch(o){case i.Default:return Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsxs)("button",{autoFocus:!0,accessKey:"a",onClick:function(){return u(i.AddingDistraction)},children:[Object(j.jsx)("u",{children:"A"}),"dd Distraction"]}),Object(j.jsxs)("button",{accessKey:"n",onClick:function(){u(i.StoppingActivity),m((new Date).toLocaleString())},children:["E",Object(j.jsx)("u",{children:"n"}),"d Activity"]})]});case i.AddingDistraction:return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(f,p),O(""),g(v.Internal),u(i.Default)},children:[Object(j.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Distraction description...",onChange:function(e){return O(e.target.value)},value:f}),Object(j.jsxs)("label",{accessKey:"i",children:[Object(j.jsx)("input",{type:"radio",value:v.Internal,checked:p===v.Internal,onChange:function(){return g(v.Internal)}}),Object(j.jsx)("u",{children:"I"}),"nternal"]}),Object(j.jsxs)("label",{accessKey:"x",children:[Object(j.jsx)("input",{type:"radio",value:v.External,checked:p===v.External,onChange:function(){return g(v.External)}}),"E",Object(j.jsx)("u",{children:"x"}),"ternal"]}),Object(j.jsxs)("button",{accessKey:"a",type:"submit",children:[Object(j.jsx)("u",{children:"A"}),"dd"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:function(){return u(i.Default)},children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]});case i.StoppingActivity:return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Date.parse(k);t?n(Math.floor(t/1e3)):m((new Date).toLocaleString())},children:[Object(j.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Stop time...",value:k,onChange:function(e){return m(e.target.value)}}),Object(j.jsxs)("button",{accessKey:"c",type:"submit",children:[Object(j.jsx)("u",{children:"C"}),"onfirm"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:function(){return u(i.Default)},children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]})}}!function(e){e.Personal="personal",e.Work="work"}(c||(c={})),function(e){e[e.Idle=0]="Idle",e[e.SetupFocus=1]="SetupFocus"}(r||(r={})),function(e){e[e.Default=0]="Default",e[e.AddingDistraction=1]="AddingDistraction",e[e.StoppingActivity=2]="StoppingActivity"}(i||(i={}));n(12);var h="";var x="";function p(e){var t=e.activity,n=e.currentTime,c="";c=null===t?"\ud83d\udca4":t.scheduledEnd>n?t.type===g.Focus?"\ud83e\udd14":"\ud83d\ude0e":"\u231b";var r,i="";return null===t?i="Idling...":t.type===g.Break?i="Relaxing...":t.type===g.Focus&&(i="Focusing on ".concat(t.goal,"...")),function(e){if(h!==e){h=e;var t=document.querySelector("link[rel=icon]");t?t.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(h,"</text></svg>"):console.error("Could not find favicon link tag")}}(c),(r=i)!==x&&(x=r,document.title=r),Object(j.jsx)("div",{className:"Status",children:Object(j.jsx)("h1",{style:{marginBottom:0},children:"".concat(c," ").concat(x)})})}var g,v,y;function S(){return Math.floor(Date.now()/1e3)}function k(e){return 60*e}function m(e){return JSON.parse(JSON.stringify(e))}function F(e,t){return"start"!==e&&"scheduledEnd"!==e&&"end"!==e||!t?t:new Date(1e3*t).toLocaleString()}!function(e){e.Focus="focus",e.Break="break"}(g||(g={})),function(e){e.Internal="internal",e.External="external"}(v||(v={})),function(e){e.Idling="idling",e.Focusing="focusing",e.Relaxing="relaxing"}(y||(y={}));var I=void 0;var w=function(){var e,t=Object(s.useState)([]),n=Object(l.a)(t,2),c=n[0],r=n[1],i=Object(s.useState)(S()),o=Object(l.a)(i,2),u=o[0],d=o[1],h=Object(s.useState)(null),x=Object(l.a)(h,2),v=x[0],w=x[1];if(Object(s.useEffect)((function(){var e=localStorage.getItem("activities");if(e){var t=JSON.parse(e);r(t)}var n=localStorage.getItem("currentActivity");if(n){var c=JSON.parse(n);w(c)}}),[]),Object(s.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(c))}),[c]),Object(s.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(v))}),[v]),v&&null===v.end)switch(v.type){case g.Focus:e=y.Focusing;break;case g.Break:e=y.Relaxing;break;default:console.error("Unknown activity type: ".concat(v.type)),e=y.Idling}else e=y.Idling;Object(s.useEffect)((function(){return void 0===I&&(I=window.setInterval((function(){var e=S();e>u&&d(e)}),500)),function(){window.clearInterval(I),I=void 0}}));var D=Object(s.useState)(!1),A=Object(l.a)(D,2),C=A[0],B=A[1];Object(s.useEffect)((function(){C||("granted"!==Notification.permission&&Notification.requestPermission(),B(!0))}));var E,N,K=Object(s.useState)(!1),J=Object(l.a)(K,2),M=J[0],P=J[1];switch(Object(s.useEffect)((function(){e!==y.Idling&&v&&u>v.scheduledEnd&&!M&&(new Notification("".concat(v.type," time complete"),{requireInteraction:!0}),P(!0))})),e){case y.Idling:E=Object(j.jsx)(b,{startFocus:function(e,t){var n=S(),c={start:n,end:null,scheduledEnd:n+k(25),goal:e,tags:t,type:g.Focus,distractions:[]};w(c),P(!1)},startBreak:function(e){var t=S(),n={start:t,end:null,scheduledEnd:t+k(e),type:g.Break};w(n),P(!1)},shortBreakMinutes:5,longBreakMinutes:15});break;case y.Focusing:case y.Relaxing:E=Object(j.jsx)(O,{addDistraction:function(e,t){if(v){var n=m(v);n.distractions||(n.distractions=[]),n.distractions.push({description:e,type:t}),w(n)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(e){if(v){var t=m(v),n=Array.from(c);t.end=e,n.push(t),r(n),w(null)}else console.error("trying to stop an activity when no activity is in progress")}});break;default:console.error("Unsupported currentState: ".concat(e)),E=Object(j.jsx)(a.a.Fragment,{})}return N=v&&e!=y.Idling?Object(j.jsx)(f,{end:v.scheduledEnd,current:u}):Object(j.jsx)(f,{end:0,current:0}),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(j.jsxs)("div",{className:"App-body",children:[Object(j.jsx)(p,{activity:v,currentTime:u}),Object(j.jsxs)("div",{className:"Timer-controls",children:[N,E]}),Object(j.jsx)("hr",{}),Object(j.jsx)("h2",{children:"Current Activity"}),Object(j.jsx)("pre",{children:JSON.stringify(v,F,2)}),Object(j.jsx)("hr",{}),Object(j.jsx)("h2",{children:"Previous Activities"}),Object(j.jsx)("pre",{children:JSON.stringify(Array.from(c).reverse(),F,2)})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};u.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),D()}],[[13,1,2]]]);
//# sourceMappingURL=main.d1c74f06.chunk.js.map