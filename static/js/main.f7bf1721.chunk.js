(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c,r,i=n(1),s=n.n(i),a=n(4),o=n.n(a),u=(n(9),n(2)),l=(n(10),n(0));function j(t){var e=t.startFocus,n=t.cancel,c=t.defaultFocusType,r=Object(i.useState)(""),s=Object(u.a)(r,2),a=s[0],o=s[1],j=Object(i.useState)(25),d=Object(u.a)(j,2),b=d[0],O=d[1],f=Object(i.useState)(c),h=Object(u.a)(f,2),p=h[0],x=h[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(a,b,[p])},children:[Object(l.jsxs)("label",{htmlFor:"pomGoal",accessKey:"g",children:[Object(l.jsx)("u",{children:"G"}),"oal:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"pomGoal",type:"text",onChange:function(t){return o(t.target.value)},value:a}),Object(l.jsxs)("label",{htmlFor:"pomDuration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration:"]}),Object(l.jsx)("input",{id:"pomDuration",type:"text",onChange:function(t){return O(parseInt(t.target.value)||0)},value:b}),Object(l.jsxs)("label",{accessKey:"p",children:[Object(l.jsx)("input",{type:"Radio",value:m.Personal,checked:p===m.Personal,onChange:function(){x(m.Personal)}}),Object(l.jsx)("u",{children:"P"}),"ersonal"]}),Object(l.jsxs)("label",{accessKey:"o",children:[Object(l.jsx)("input",{type:"Radio",value:m.Work,checked:p===m.Work,onChange:function(){x(m.Work)}}),"W",Object(l.jsx)("u",{children:"o"}),"rk"]}),Object(l.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(l.jsx)("u",{children:"S"}),"tart"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:n,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function d(t){var e=t.startBreak,n=t.breakType,c=t.suggestedDuration,r=t.cancel,s=Object(i.useState)(""),a=Object(u.a)(s,2),o=a[0],j=a[1],d=Object(i.useState)(c),b=Object(u.a)(d,2),O=b[0],f=b[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(o,O,n)},children:[Object(l.jsxs)("label",{htmlFor:"break-description",accessKey:"c",children:["Des",Object(l.jsx)("u",{children:"c"}),"ription:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"break-description",type:"text",onChange:function(t){return j(t.target.value)},value:o}),Object(l.jsxs)("label",{htmlFor:"pom-duration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration:"]}),Object(l.jsx)("input",{id:"pom-duration",type:"text",onChange:function(t){return f(parseInt(t.target.value)||0)},value:O}),Object(l.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(l.jsx)("u",{children:"S"}),"tart"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:r,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function b(t){var e=t.startFocus,n=t.startBreak,r=t.defaultFocusType,a=t.shortBreakMinutes,o=t.longBreakMinutes,b=Object(i.useState)(c.Idle),O=Object(u.a)(b,2),f=O[0],h=O[1],p=Object(i.useState)(0),x=Object(u.a)(p,2),g=x[0],y=x[1],v=Object(i.useState)(S.Short),m=Object(u.a)(v,2),k=m[0],F=m[1];function D(t,e){y(t),F(e),h(c.SetupBreak)}switch(f){case c.Idle:return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"o",onClick:function(){return h(c.SetupFocus)},children:["F",Object(l.jsx)("u",{children:"o"}),"cus"]}),Object(l.jsxs)("button",{accessKey:"h",onClick:function(){return D(a,S.Short)},children:["S",Object(l.jsx)("u",{children:"h"}),"ort Break"]}),Object(l.jsxs)("button",{accessKey:"l",onClick:function(){return D(o,S.Long)},children:[Object(l.jsx)("u",{children:"L"}),"ong Break"]})]});case c.SetupFocus:return Object(l.jsx)(j,{startFocus:e,defaultFocusType:r,cancel:function(){return h(c.Idle)}});case c.SetupBreak:return Object(l.jsx)(d,{startBreak:n,breakType:k,suggestedDuration:g,cancel:function(){return h(c.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(f)),Object(l.jsx)(s.a.Fragment,{})}}function O(t){var e=function(t){var e=t<0;t=Math.abs(t);var n=Math.floor(t/60),c=t%60,r=n<10?"0"+n:""+n,i=c<10?"0"+c:""+c;return"".concat(e?"-":" ").concat(r,":").concat(i)}(t.end-t.current);return Object(l.jsx)("pre",{style:{fontSize:"xx-large"},children:e})}function f(t){var e=t.addDistraction,n=t.defaultDistractionType,c=t.cancel,r=Object(i.useState)(n),s=Object(u.a)(r,2),a=s[0],o=s[1],j=Object(i.useState)(""),d=Object(u.a)(j,2),b=d[0],O=d[1];return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(b,a)},children:[Object(l.jsxs)("label",{accessKey:"d",htmlFor:"distraction-description",children:[Object(l.jsx)("u",{children:"D"}),"istraction description:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"distraction-description",type:"text",onChange:function(t){return O(t.target.value)}}),Object(l.jsxs)("label",{accessKey:"i",children:[Object(l.jsx)("input",{type:"radio",checked:a===v.Internal,onClick:function(){return o(v.Internal)}}),Object(l.jsx)("u",{children:"I"}),"nternal"]}),Object(l.jsxs)("label",{accessKey:"x",children:[Object(l.jsx)("input",{type:"radio",checked:a===v.External,onClick:function(){return o(v.External)}}),"E",Object(l.jsx)("u",{children:"x"}),"ternal"]}),Object(l.jsxs)("button",{type:"submit",children:[Object(l.jsx)("u",{children:"A"}),"dd"]}),Object(l.jsxs)("button",{onClick:c,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function h(t){var e=t.addDistraction,n=t.stopActivity,c=t.defaultDistractionType,a=Object(i.useState)(r.Default),o=Object(u.a)(a,2),j=o[0],d=o[1],b=Object(i.useState)(""),O=Object(u.a)(b,2),h=O[0],p=O[1];switch(j){case r.Default:return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"d",onClick:function(){return d(r.AddingDistraction)},children:["A",Object(l.jsx)("u",{children:"d"}),"d Distraction"]}),Object(l.jsxs)("button",{accessKey:"n",onClick:function(){d(r.StoppingActivity),p((new Date).toLocaleString())},children:["E",Object(l.jsx)("u",{children:"n"}),"d Activity"]})]});case r.AddingDistraction:return Object(l.jsx)(f,{addDistraction:function(t,n){e(t,n),d(r.Default)},cancel:function(){return d(r.Default)},defaultDistractionType:c});case r.StoppingActivity:return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var e=Date.parse(h);e?n(Math.floor(e/1e3)):p((new Date).toLocaleString())},children:[Object(l.jsxs)("label",{htmlFor:"stopTime",accessKey:"t",children:["S",Object(l.jsx)("u",{children:"t"}),"op time:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"stopTime",type:"text",placeholder:"Stop time...",value:h,onChange:function(t){return p(t.target.value)}}),Object(l.jsxs)("button",{accessKey:"c",type:"submit",children:[Object(l.jsx)("u",{children:"C"}),"onfirm"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:function(){return d(r.Default)},children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}}!function(t){t[t.Idle=0]="Idle",t[t.SetupFocus=1]="SetupFocus",t[t.SetupBreak=2]="SetupBreak"}(c||(c={})),function(t){t[t.Default=0]="Default",t[t.AddingDistraction=1]="AddingDistraction",t[t.StoppingActivity=2]="StoppingActivity"}(r||(r={}));n(12);var p="";var x="";function g(t){var e=t.activity,n=t.currentTime,c="";c=null===e?"\ud83d\udca4":e.scheduledEnd>n?e.type===y.Focus?"\ud83e\udd14":"\ud83d\ude0e":"\u231b";var r,i="";return null===e?i="Idling...":e.type===y.Break?i="Relaxing...":e.type===y.Focus&&(i="Focusing on ".concat(e.goal,"...")),function(t){if(p!==t){p=t;var e=document.querySelector("link[rel=icon]");e?e.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(p,"</text></svg>"):console.error("Could not find favicon link tag")}}(c),(r=i)!==x&&(x=r,document.title=r),Object(l.jsx)("div",{className:"Status",children:Object(l.jsx)("h1",{style:{marginBottom:0},children:"".concat(c," ").concat(x)})})}var y,v,S,m,k;function F(){return Math.floor(Date.now()/1e3)}function D(t){return 60*t}function I(t){return JSON.parse(JSON.stringify(t))}function w(t,e){return"start"!==t&&"scheduledEnd"!==t&&"end"!==t||!e?e:new Date(1e3*e).toLocaleString()}!function(t){t.Focus="focus",t.Break="break"}(y||(y={})),function(t){t.Internal="internal",t.External="external"}(v||(v={})),function(t){t.Short="short break",t.Long="long break"}(S||(S={})),function(t){t.Personal="personal",t.Work="work"}(m||(m={})),function(t){t.Idling="idling",t.Focusing="focusing",t.Relaxing="relaxing"}(k||(k={}));var B=void 0;var C=function(){var t,e=Object(i.useState)([]),n=Object(u.a)(e,2),c=n[0],r=n[1],a=Object(i.useState)(F()),o=Object(u.a)(a,2),j=o[0],d=o[1],f=Object(i.useState)(null),p=Object(u.a)(f,2),x=p[0],S=p[1],C=Object(i.useState)(v.Internal),A=Object(u.a)(C,2),K=A[0],E=A[1],T=Object(i.useState)(m.Work),N=Object(u.a)(T,2),J=N[0],M=N[1];if(Object(i.useEffect)((function(){if(x){var t=x.tags[0],e=x.distractions[x.distractions.length-1];x.type===y.Focus&&t&&t!==J&&M(t),e&&e.type!=K&&E(e.type)}}),[x]),Object(i.useEffect)((function(){var t=localStorage.getItem("activities");if(t){var e=JSON.parse(t);r(e)}var n=localStorage.getItem("currentActivity");if(n){var c=JSON.parse(n);S(c)}}),[]),Object(i.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(c))}),[c]),Object(i.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(x))}),[x]),x&&null===x.end)switch(x.type){case y.Focus:t=k.Focusing;break;case y.Break:t=k.Relaxing;break;default:console.error("Unknown activity type: ".concat(x.type)),t=k.Idling}else t=k.Idling;Object(i.useEffect)((function(){return void 0===B&&(B=window.setInterval((function(){var t=F();t>j&&d(t)}),500)),function(){window.clearInterval(B),B=void 0}}));var P=Object(i.useState)(!1),L=Object(u.a)(P,2),R=L[0],W=L[1];Object(i.useEffect)((function(){R||("granted"!==Notification.permission&&Notification.requestPermission(),W(!0))}));var q,G,U=Object(i.useState)(!1),z=Object(u.a)(U,2),H=z[0],Q=z[1];switch(Object(i.useEffect)((function(){if(t!==k.Idling&&x&&j>x.scheduledEnd&&!H){var e=new Notification("".concat(x.type," time complete"),{requireInteraction:!0,tag:"renotify",renotify:!0});e.onclick=function(){window.focus(),e.close()},Q(!0)}})),t){case k.Idling:q=Object(l.jsx)(b,{startFocus:function(t,e,n){var c=F(),r={start:c,end:null,scheduledEnd:c+D(e),goal:t,tags:n,type:y.Focus,distractions:[]};S(r),Q(!1)},startBreak:function(t,e,n){var c=F(),r={start:c,end:null,scheduledEnd:c+D(e),type:y.Break,goal:t,tags:[n],distractions:[]};S(r),Q(!1)},shortBreakMinutes:5,longBreakMinutes:15,defaultFocusType:J});break;case k.Focusing:case k.Relaxing:q=Object(l.jsx)(h,{addDistraction:function(t,e){if(x){var n=I(x);n.distractions||(n.distractions=[]),n.distractions.push({description:t,type:e}),S(n)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(t){if(x){var e=I(x),n=Array.from(c);e.end=t,n.push(e),r(n),S(null)}else console.error("trying to stop an activity when no activity is in progress")},defaultDistractionType:K});break;default:console.error("Unsupported currentState: ".concat(t)),q=Object(l.jsx)(s.a.Fragment,{})}return G=x&&t!=k.Idling?Object(l.jsx)(O,{end:x.scheduledEnd,current:j}):Object(l.jsx)(O,{end:0,current:0}),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(l.jsxs)("div",{className:"App-body",children:[Object(l.jsx)(g,{activity:x,currentTime:j}),Object(l.jsxs)("div",{className:"Timer-controls",children:[G,q]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Current Activity"}),Object(l.jsx)("pre",{children:JSON.stringify(x,w,2)}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Previous Activities"}),Object(l.jsx)("pre",{children:JSON.stringify(Array.from(c).reverse(),w,2)})]})]})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),c(t),r(t),i(t),s(t)}))};o.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),A()}],[[13,1,2]]]);
//# sourceMappingURL=main.f7bf1721.chunk.js.map