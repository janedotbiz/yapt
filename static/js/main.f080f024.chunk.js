(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,r,i,a=n(1),s=n.n(a),o=n(4),u=n.n(o),l=(n(9),n(2)),j=(n(10),n(0));function d(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(25),o=Object(l.a)(s,2),u=o[0],d=o[1],b=Object(a.useState)(c.Work),O=Object(l.a)(b,2),h=O[0],f=O[1];return Object(j.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.startFocus(r,u,[h])}(t)},children:[Object(j.jsxs)("label",{htmlFor:"pomGoal",accessKey:"g",children:[Object(j.jsx)("u",{children:"G"}),"oal:"]}),Object(j.jsx)("input",{autoFocus:!0,id:"pomGoal",type:"text",onChange:function(e){return i(e.target.value)},value:r}),Object(j.jsxs)("label",{htmlFor:"pomDuration",accessKey:"d",children:[Object(j.jsx)("u",{children:"D"}),"uration:"]}),Object(j.jsx)("input",{id:"pomDuration",type:"text",onChange:function(e){return d(parseInt(e.target.value)||0)},value:u}),Object(j.jsxs)("label",{accessKey:"p",children:[Object(j.jsx)("input",{type:"Radio",value:c.Personal,checked:h===c.Personal,onChange:function(){f(c.Personal)}}),Object(j.jsx)("u",{children:"P"}),"ersonal"]}),Object(j.jsxs)("label",{accessKey:"o",children:[Object(j.jsx)("input",{type:"Radio",value:c.Work,checked:h===c.Work,onChange:function(){f(c.Work)}}),"W",Object(j.jsx)("u",{children:"o"}),"rk"]}),Object(j.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(j.jsx)("u",{children:"S"}),"tart"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:e.cancel,children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]})}function b(e){var t=e.suggestedDuration,n=e.breakType,c=e.startBreak,r=e.cancel,i=Object(a.useState)(n),s=Object(l.a)(i,2),o=s[0],u=s[1],d=Object(a.useState)(t),b=Object(l.a)(d,2),O=b[0],h=b[1];return Object(j.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),c(o,O,n)}(e)},children:[Object(j.jsxs)("label",{htmlFor:"breakDescription",accessKey:"c",children:["Des",Object(j.jsx)("u",{children:"c"}),"ription"]}),Object(j.jsx)("input",{type:"text",id:"breakDescription",onChange:function(e){return u(e.target.value)},value:o}),Object(j.jsxs)("label",{htmlFor:"breakDuration",accessKey:"d",children:[Object(j.jsx)("u",{children:"D"}),"uration"]}),Object(j.jsx)("input",{autoFocus:!0,id:"breakDuration",type:"text",onChange:function(e){return h(parseInt(e.target.value)||0)},value:O}),Object(j.jsxs)("button",{accessKey:"t",type:"submit",children:["S",Object(j.jsx)("u",{children:"t"}),"art"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:r,children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]})}function O(e){var t=e.startFocus,n=e.startBreak,c=e.shortBreakMinutes,i=e.longBreakMinutes,o=Object(a.useState)(r.Idle),u=Object(l.a)(o,2),O=u[0],h=u[1],f=Object(a.useState)(0),p=Object(l.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(S.Short),y=Object(l.a)(v,2),k=y[0],m=y[1];function D(e,t){g(e),m(t),h(r.SetupBreak)}switch(O){case r.Idle:return Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsxs)("button",{autoFocus:!0,accessKey:"o",onClick:function(){return h(r.SetupFocus)},children:["F",Object(j.jsx)("u",{children:"o"}),"cus"]}),Object(j.jsxs)("button",{accessKey:"h",onClick:function(){return D(c,S.Short)},children:["S",Object(j.jsx)("u",{children:"h"}),"ort Break"]}),Object(j.jsxs)("button",{accessKey:"l",onClick:function(){return D(i,S.Long)},children:[Object(j.jsx)("u",{children:"L"}),"ong Break"]})]});case r.SetupFocus:return Object(j.jsx)(d,{startFocus:t,cancel:function(){return h(r.Idle)}});case r.SetupBreak:return Object(j.jsx)(b,{startBreak:n,breakType:k,suggestedDuration:x,cancel:function(){return h(r.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(O)),Object(j.jsx)(s.a.Fragment,{})}}function h(e){var t=function(e){var t=e<0;e=Math.abs(e);var n=Math.floor(e/60),c=e%60,r=n<10?"0"+n:""+n,i=c<10?"0"+c:""+c;return"".concat(t?"-":" ").concat(r,":").concat(i)}(e.end-e.current);return Object(j.jsx)("pre",{style:{fontSize:"xx-large"},children:t})}function f(e){var t=e.addDistraction,n=e.stopActivity,c=Object(a.useState)(i.Default),r=Object(l.a)(c,2),o=r[0],u=r[1],d=Object(a.useState)(""),b=Object(l.a)(d,2),O=b[0],h=b[1],f=Object(a.useState)(y.Internal),p=Object(l.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(""),S=Object(l.a)(v,2),k=S[0],m=S[1];switch(o){case i.Default:return Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsxs)("button",{autoFocus:!0,accessKey:"d",onClick:function(){return u(i.AddingDistraction)},children:["A",Object(j.jsx)("u",{children:"d"}),"d Distraction"]}),Object(j.jsxs)("button",{accessKey:"n",onClick:function(){u(i.StoppingActivity),m((new Date).toLocaleString())},children:["E",Object(j.jsx)("u",{children:"n"}),"d Activity"]})]});case i.AddingDistraction:return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(O,x),h(""),g(y.Internal),u(i.Default)},children:[Object(j.jsxs)("label",{htmlFor:"distractionDescription",accessKey:"d",children:[Object(j.jsx)("u",{children:"D"}),"istraction description:"]}),Object(j.jsx)("input",{autoFocus:!0,id:"distractionDescription",type:"text",onChange:function(e){return h(e.target.value)},value:O}),Object(j.jsxs)("label",{accessKey:"i",children:[Object(j.jsx)("input",{type:"radio",value:y.Internal,checked:x===y.Internal,onChange:function(){return g(y.Internal)}}),Object(j.jsx)("u",{children:"I"}),"nternal"]}),Object(j.jsxs)("label",{accessKey:"x",children:[Object(j.jsx)("input",{type:"radio",value:y.External,checked:x===y.External,onChange:function(){return g(y.External)}}),"E",Object(j.jsx)("u",{children:"x"}),"ternal"]}),Object(j.jsxs)("button",{accessKey:"a",type:"submit",children:[Object(j.jsx)("u",{children:"A"}),"dd"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:function(){return u(i.Default)},children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]});case i.StoppingActivity:return Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Date.parse(k);t?n(Math.floor(t/1e3)):m((new Date).toLocaleString())},children:[Object(j.jsxs)("label",{htmlFor:"stopTime",accessKey:"t",children:["S",Object(j.jsx)("u",{children:"t"}),"op time:"]}),Object(j.jsx)("input",{autoFocus:!0,id:"stopTime",type:"text",placeholder:"Stop time...",value:k,onChange:function(e){return m(e.target.value)}}),Object(j.jsxs)("button",{accessKey:"c",type:"submit",children:[Object(j.jsx)("u",{children:"C"}),"onfirm"]}),Object(j.jsxs)("button",{accessKey:"b",onClick:function(){return u(i.Default)},children:[Object(j.jsx)("u",{children:"B"}),"ack"]})]})}}!function(e){e.Personal="personal",e.Work="work"}(c||(c={})),function(e){e[e.Idle=0]="Idle",e[e.SetupFocus=1]="SetupFocus",e[e.SetupBreak=2]="SetupBreak"}(r||(r={})),function(e){e[e.Default=0]="Default",e[e.AddingDistraction=1]="AddingDistraction",e[e.StoppingActivity=2]="StoppingActivity"}(i||(i={}));n(12);var p="";var x="";function g(e){var t=e.activity,n=e.currentTime,c="";c=null===t?"\ud83d\udca4":t.scheduledEnd>n?t.type===v.Focus?"\ud83e\udd14":"\ud83d\ude0e":"\u231b";var r,i="";return null===t?i="Idling...":t.type===v.Break?i="Relaxing...":t.type===v.Focus&&(i="Focusing on ".concat(t.goal,"...")),function(e){if(p!==e){p=e;var t=document.querySelector("link[rel=icon]");t?t.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(p,"</text></svg>"):console.error("Could not find favicon link tag")}}(c),(r=i)!==x&&(x=r,document.title=r),Object(j.jsx)("div",{className:"Status",children:Object(j.jsx)("h1",{style:{marginBottom:0},children:"".concat(c," ").concat(x)})})}var v,y,S,k;function m(){return Math.floor(Date.now()/1e3)}function D(e){return 60*e}function F(e){return JSON.parse(JSON.stringify(e))}function I(e,t){return"start"!==e&&"scheduledEnd"!==e&&"end"!==e||!t?t:new Date(1e3*t).toLocaleString()}!function(e){e.Focus="focus",e.Break="break"}(v||(v={})),function(e){e.Internal="internal",e.External="external"}(y||(y={})),function(e){e.Short="short break",e.Long="long break"}(S||(S={})),function(e){e.Idling="idling",e.Focusing="focusing",e.Relaxing="relaxing"}(k||(k={}));var B=void 0;var w=function(){var e,t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(m()),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(a.useState)(null),p=Object(l.a)(b,2),x=p[0],y=p[1];if(Object(a.useEffect)((function(){var e=localStorage.getItem("activities");if(e){var t=JSON.parse(e);r(t)}var n=localStorage.getItem("currentActivity");if(n){var c=JSON.parse(n);y(c)}}),[]),Object(a.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(c))}),[c]),Object(a.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(x))}),[x]),x&&null===x.end)switch(x.type){case v.Focus:e=k.Focusing;break;case v.Break:e=k.Relaxing;break;default:console.error("Unknown activity type: ".concat(x.type)),e=k.Idling}else e=k.Idling;Object(a.useEffect)((function(){return void 0===B&&(B=window.setInterval((function(){var e=m();e>u&&d(e)}),500)),function(){window.clearInterval(B),B=void 0}}));var S=Object(a.useState)(!1),w=Object(l.a)(S,2),C=w[0],K=w[1];Object(a.useEffect)((function(){C||("granted"!==Notification.permission&&Notification.requestPermission(),K(!0))}));var A,E,N=Object(a.useState)(!1),J=Object(l.a)(N,2),M=J[0],P=J[1];switch(Object(a.useEffect)((function(){e!==k.Idling&&x&&u>x.scheduledEnd&&!M&&(new Notification("".concat(x.type," time complete"),{requireInteraction:!0}),P(!0))})),e){case k.Idling:A=Object(j.jsx)(O,{startFocus:function(e,t,n){var c=m(),r={start:c,end:null,scheduledEnd:c+D(t),goal:e,tags:n,type:v.Focus,distractions:[]};y(r),P(!1)},startBreak:function(e,t,n){var c=m(),r={start:c,end:null,scheduledEnd:c+D(t),type:v.Break,goal:e,tags:[n]};y(r),P(!1)},shortBreakMinutes:5,longBreakMinutes:15});break;case k.Focusing:case k.Relaxing:A=Object(j.jsx)(f,{addDistraction:function(e,t){if(x){var n=F(x);n.distractions||(n.distractions=[]),n.distractions.push({description:e,type:t}),y(n)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(e){if(x){var t=F(x),n=Array.from(c);t.end=e,n.push(t),r(n),y(null)}else console.error("trying to stop an activity when no activity is in progress")}});break;default:console.error("Unsupported currentState: ".concat(e)),A=Object(j.jsx)(s.a.Fragment,{})}return E=x&&e!=k.Idling?Object(j.jsx)(h,{end:x.scheduledEnd,current:u}):Object(j.jsx)(h,{end:0,current:0}),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(j.jsxs)("div",{className:"App-body",children:[Object(j.jsx)(g,{activity:x,currentTime:u}),Object(j.jsxs)("div",{className:"Timer-controls",children:[E,A]}),Object(j.jsx)("hr",{}),Object(j.jsx)("h2",{children:"Current Activity"}),Object(j.jsx)("pre",{children:JSON.stringify(x,I,2)}),Object(j.jsx)("hr",{}),Object(j.jsx)("h2",{children:"Previous Activities"}),Object(j.jsx)("pre",{children:JSON.stringify(Array.from(c).reverse(),I,2)})]})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};u.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),C()}],[[13,1,2]]]);
//# sourceMappingURL=main.f080f024.chunk.js.map