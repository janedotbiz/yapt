(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),i=n.n(a),s=n(4),o=n.n(s),u=(n(9),n(2)),l=(n(10),n(0));function j(e){var t=e.startFocus,n=e.cancel,c=e.defaultFocusType,r=Object(a.useState)(""),i=Object(u.a)(r,2),s=i[0],o=i[1],j=Object(a.useState)(25),d=Object(u.a)(j,2),b=d[0],O=d[1],f=Object(a.useState)(c),h=Object(u.a)(f,2),p=h[0],x=h[1];return Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(s,b,[p])}(e)},children:[Object(l.jsxs)("label",{htmlFor:"pomGoal",accessKey:"g",children:[Object(l.jsx)("u",{children:"G"}),"oal:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"pomGoal",type:"text",onChange:function(e){return o(e.target.value)},value:s}),Object(l.jsxs)("label",{htmlFor:"pomDuration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration:"]}),Object(l.jsx)("input",{id:"pomDuration",type:"text",onChange:function(e){return O(parseInt(e.target.value)||0)},value:b}),Object(l.jsxs)("label",{accessKey:"p",children:[Object(l.jsx)("input",{type:"Radio",value:k.Personal,checked:p===k.Personal,onChange:function(){x(k.Personal)}}),Object(l.jsx)("u",{children:"P"}),"ersonal"]}),Object(l.jsxs)("label",{accessKey:"o",children:[Object(l.jsx)("input",{type:"Radio",value:k.Work,checked:p===k.Work,onChange:function(){x(k.Work)}}),"W",Object(l.jsx)("u",{children:"o"}),"rk"]}),Object(l.jsxs)("button",{accessKey:"s",type:"submit",children:[Object(l.jsx)("u",{children:"S"}),"tart"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:n,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function d(e){var t=e.suggestedDuration,n=e.breakType,c=e.startBreak,r=e.cancel,i=Object(a.useState)(n),s=Object(u.a)(i,2),o=s[0],j=s[1],d=Object(a.useState)(t),b=Object(u.a)(d,2),O=b[0],f=b[1];return Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),c(o,O,n)}(e)},children:[Object(l.jsxs)("label",{htmlFor:"breakDescription",accessKey:"c",children:["Des",Object(l.jsx)("u",{children:"c"}),"ription"]}),Object(l.jsx)("input",{type:"text",id:"breakDescription",onChange:function(e){return j(e.target.value)},value:o}),Object(l.jsxs)("label",{htmlFor:"breakDuration",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"uration"]}),Object(l.jsx)("input",{autoFocus:!0,id:"breakDuration",type:"text",onChange:function(e){return f(parseInt(e.target.value)||0)},value:O}),Object(l.jsxs)("button",{accessKey:"t",type:"submit",children:["S",Object(l.jsx)("u",{children:"t"}),"art"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:r,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function b(e){var t=e.startFocus,n=e.startBreak,r=e.defaultFocusType,s=e.shortBreakMinutes,o=e.longBreakMinutes,b=Object(a.useState)(c.Idle),O=Object(u.a)(b,2),f=O[0],h=O[1],p=Object(a.useState)(0),x=Object(u.a)(p,2),g=x[0],y=x[1],v=Object(a.useState)(S.Short),k=Object(u.a)(v,2),m=k[0],D=k[1];function F(e,t){y(e),D(t),h(c.SetupBreak)}switch(f){case c.Idle:return Object(l.jsxs)(i.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"o",onClick:function(){return h(c.SetupFocus)},children:["F",Object(l.jsx)("u",{children:"o"}),"cus"]}),Object(l.jsxs)("button",{accessKey:"h",onClick:function(){return F(s,S.Short)},children:["S",Object(l.jsx)("u",{children:"h"}),"ort Break"]}),Object(l.jsxs)("button",{accessKey:"l",onClick:function(){return F(o,S.Long)},children:[Object(l.jsx)("u",{children:"L"}),"ong Break"]})]});case c.SetupFocus:return Object(l.jsx)(j,{startFocus:t,defaultFocusType:r,cancel:function(){return h(c.Idle)}});case c.SetupBreak:return Object(l.jsx)(d,{startBreak:n,breakType:m,suggestedDuration:g,cancel:function(){return h(c.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(f)),Object(l.jsx)(i.a.Fragment,{})}}function O(e){var t=function(e){var t=e<0;e=Math.abs(e);var n=Math.floor(e/60),c=e%60,r=n<10?"0"+n:""+n,a=c<10?"0"+c:""+c;return"".concat(t?"-":" ").concat(r,":").concat(a)}(e.end-e.current);return Object(l.jsx)("pre",{style:{fontSize:"xx-large"},children:t})}function f(e){var t=e.addDistraction,n=e.cancel,c=e.defaultDistractionType,r=Object(a.useState)(""),i=Object(u.a)(r,2),s=i[0],o=i[1],j=Object(a.useState)(c),d=Object(u.a)(j,2),b=d[0],O=d[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s,b)},children:[Object(l.jsxs)("label",{htmlFor:"distractionDescription",accessKey:"d",children:[Object(l.jsx)("u",{children:"D"}),"istraction description:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"distractionDescription",type:"text",onChange:function(e){return o(e.target.value)},value:s}),Object(l.jsxs)("label",{accessKey:"i",children:[Object(l.jsx)("input",{type:"radio",value:v.Internal,checked:b===v.Internal,onChange:function(){return O(v.Internal)}}),Object(l.jsx)("u",{children:"I"}),"nternal"]}),Object(l.jsxs)("label",{accessKey:"x",children:[Object(l.jsx)("input",{type:"radio",value:v.External,checked:b===v.External,onChange:function(){return O(v.External)}}),"E",Object(l.jsx)("u",{children:"x"}),"ternal"]}),Object(l.jsxs)("button",{accessKey:"a",type:"submit",children:[Object(l.jsx)("u",{children:"A"}),"dd"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:n,children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}function h(e){var t=e.addDistraction,n=e.stopActivity,c=e.defaultDistractionType,s=Object(a.useState)(r.Default),o=Object(u.a)(s,2),j=o[0],d=o[1],b=Object(a.useState)(""),O=Object(u.a)(b,2),h=O[0],p=O[1];switch(j){case r.Default:return Object(l.jsxs)(i.a.Fragment,{children:[Object(l.jsxs)("button",{autoFocus:!0,accessKey:"d",onClick:function(){return d(r.AddingDistraction)},children:["A",Object(l.jsx)("u",{children:"d"}),"d Distraction"]}),Object(l.jsxs)("button",{accessKey:"n",onClick:function(){d(r.StoppingActivity),p((new Date).toLocaleString())},children:["E",Object(l.jsx)("u",{children:"n"}),"d Activity"]})]});case r.AddingDistraction:return Object(l.jsx)(f,{addDistraction:function(e,n){t(e,n),d(r.Default)},cancel:function(){return d(r.Default)},defaultDistractionType:c});case r.StoppingActivity:return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Date.parse(h);t?n(Math.floor(t/1e3)):p((new Date).toLocaleString())},children:[Object(l.jsxs)("label",{htmlFor:"stopTime",accessKey:"t",children:["S",Object(l.jsx)("u",{children:"t"}),"op time:"]}),Object(l.jsx)("input",{autoFocus:!0,id:"stopTime",type:"text",placeholder:"Stop time...",value:h,onChange:function(e){return p(e.target.value)}}),Object(l.jsxs)("button",{accessKey:"c",type:"submit",children:[Object(l.jsx)("u",{children:"C"}),"onfirm"]}),Object(l.jsxs)("button",{accessKey:"b",onClick:function(){return d(r.Default)},children:[Object(l.jsx)("u",{children:"B"}),"ack"]})]})}}!function(e){e[e.Idle=0]="Idle",e[e.SetupFocus=1]="SetupFocus",e[e.SetupBreak=2]="SetupBreak"}(c||(c={})),function(e){e[e.Default=0]="Default",e[e.AddingDistraction=1]="AddingDistraction",e[e.StoppingActivity=2]="StoppingActivity"}(r||(r={}));n(12);var p="";var x="";function g(e){var t=e.activity,n=e.currentTime,c="";c=null===t?"\ud83d\udca4":t.scheduledEnd>n?t.type===y.Focus?"\ud83e\udd14":"\ud83d\ude0e":"\u231b";var r,a="";return null===t?a="Idling...":t.type===y.Break?a="Relaxing...":t.type===y.Focus&&(a="Focusing on ".concat(t.goal,"...")),function(e){if(p!==e){p=e;var t=document.querySelector("link[rel=icon]");t?t.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(p,"</text></svg>"):console.error("Could not find favicon link tag")}}(c),(r=a)!==x&&(x=r,document.title=r),Object(l.jsx)("div",{className:"Status",children:Object(l.jsx)("h1",{style:{marginBottom:0},children:"".concat(c," ").concat(x)})})}var y,v,S,k,m;function D(){return Math.floor(Date.now()/1e3)}function F(e){return 60*e}function I(e){return JSON.parse(JSON.stringify(e))}function B(e,t){return"start"!==e&&"scheduledEnd"!==e&&"end"!==e||!t?t:new Date(1e3*t).toLocaleString()}!function(e){e.Focus="focus",e.Break="break"}(y||(y={})),function(e){e.Internal="internal",e.External="external"}(v||(v={})),function(e){e.Short="short break",e.Long="long break"}(S||(S={})),function(e){e.Personal="personal",e.Work="work"}(k||(k={})),function(e){e.Idling="idling",e.Focusing="focusing",e.Relaxing="relaxing"}(m||(m={}));var w=void 0;var C=function(){var e,t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(D()),o=Object(u.a)(s,2),j=o[0],d=o[1],f=Object(a.useState)(null),p=Object(u.a)(f,2),x=p[0],S=p[1],C=Object(a.useState)(v.Internal),K=Object(u.a)(C,2),A=K[0],E=K[1],T=Object(a.useState)(k.Work),N=Object(u.a)(T,2),J=N[0],M=N[1];if(Object(a.useEffect)((function(){if(x){var e=x.tags[0],t=x.distractions[x.distractions.length-1];x.type===y.Focus&&e&&e!==J&&M(e),t&&t.type!=A&&E(t.type)}}),[x]),Object(a.useEffect)((function(){var e=localStorage.getItem("activities");if(e){var t=JSON.parse(e);r(t)}var n=localStorage.getItem("currentActivity");if(n){var c=JSON.parse(n);S(c)}}),[]),Object(a.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(c))}),[c]),Object(a.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(x))}),[x]),x&&null===x.end)switch(x.type){case y.Focus:e=m.Focusing;break;case y.Break:e=m.Relaxing;break;default:console.error("Unknown activity type: ".concat(x.type)),e=m.Idling}else e=m.Idling;Object(a.useEffect)((function(){return void 0===w&&(w=window.setInterval((function(){var e=D();e>j&&d(e)}),500)),function(){window.clearInterval(w),w=void 0}}));var P=Object(a.useState)(!1),L=Object(u.a)(P,2),R=L[0],W=L[1];Object(a.useEffect)((function(){R||("granted"!==Notification.permission&&Notification.requestPermission(),W(!0))}));var q,G,U=Object(a.useState)(!1),z=Object(u.a)(U,2),H=z[0],Q=z[1];switch(Object(a.useEffect)((function(){e!==m.Idling&&x&&j>x.scheduledEnd&&!H&&(new Notification("".concat(x.type," time complete"),{requireInteraction:!0}),Q(!0))})),e){case m.Idling:q=Object(l.jsx)(b,{startFocus:function(e,t,n){var c=D(),r={start:c,end:null,scheduledEnd:c+F(t),goal:e,tags:n,type:y.Focus,distractions:[]};S(r),Q(!1)},startBreak:function(e,t,n){var c=D(),r={start:c,end:null,scheduledEnd:c+F(t),type:y.Break,goal:e,tags:[n],distractions:[]};S(r),Q(!1)},shortBreakMinutes:5,longBreakMinutes:15,defaultFocusType:J});break;case m.Focusing:case m.Relaxing:q=Object(l.jsx)(h,{addDistraction:function(e,t){if(x){var n=I(x);n.distractions||(n.distractions=[]),n.distractions.push({description:e,type:t}),S(n)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(e){if(x){var t=I(x),n=Array.from(c);t.end=e,n.push(t),r(n),S(null)}else console.error("trying to stop an activity when no activity is in progress")},defaultDistractionType:A});break;default:console.error("Unsupported currentState: ".concat(e)),q=Object(l.jsx)(i.a.Fragment,{})}return G=x&&e!=m.Idling?Object(l.jsx)(O,{end:x.scheduledEnd,current:j}):Object(l.jsx)(O,{end:0,current:0}),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(l.jsxs)("div",{className:"App-body",children:[Object(l.jsx)(g,{activity:x,currentTime:j}),Object(l.jsxs)("div",{className:"Timer-controls",children:[G,q]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Current Activity"}),Object(l.jsx)("pre",{children:JSON.stringify(x,B,2)}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Previous Activities"}),Object(l.jsx)("pre",{children:JSON.stringify(Array.from(c).reverse(),B,2)})]})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),K()}],[[13,1,2]]]);
//# sourceMappingURL=main.77ba4b0a.chunk.js.map