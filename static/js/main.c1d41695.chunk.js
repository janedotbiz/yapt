(this.webpackJsonpyapt=this.webpackJsonpyapt||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c,r,i,a=n(1),o=n.n(a),s=n(4),u=n.n(s),l=(n(9),n(2)),d=(n(10),n(0));function j(t){var e=Object(a.useState)(""),n=Object(l.a)(e,2),r=n[0],i=n[1],s=Object(a.useState)(c.Work),u=Object(l.a)(s,2),j=u[0],b=u[1];return Object(d.jsxs)(o.a.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Goal",onChange:function(t){return i(t.target.value)},value:r}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"Radio",value:c.Personal,checked:j===c.Personal,onChange:function(){b(c.Personal)}}),"Personal"]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"Radio",value:c.Work,checked:j===c.Work,onChange:function(){b(c.Work)}}),"Work"]}),Object(d.jsx)("button",{onClick:function(){return t.startFocus(r,[j])},children:"Start"}),Object(d.jsx)("button",{onClick:t.cancel,children:"Back"})]})}function b(t){var e=t.startFocus,n=t.startBreak,c=t.shortBreakMinutes,i=t.longBreakMinutes,s=Object(a.useState)(r.Idle),u=Object(l.a)(s,2),b=u[0],f=u[1];switch(b){case r.Idle:return Object(d.jsxs)(o.a.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(r.SetupFocus)},children:"Focus"}),Object(d.jsx)("button",{onClick:function(){return n(c)},children:"Short Break"}),Object(d.jsx)("button",{onClick:function(){return n(i)},children:"Long Break"})]});case r.SetupFocus:return Object(d.jsx)(j,{startFocus:e,cancel:function(){return f(r.Idle)}});default:return console.error("Unknown state for idle inputs: ".concat(b)),Object(d.jsx)(o.a.Fragment,{})}}function f(t){var e=function(t){var e=t<0;t=Math.abs(t);var n=Math.floor(t/60),c=t%60,r=n<10?"0"+n:""+n,i=c<10?"0"+c:""+c;return"".concat(e?"-":" ").concat(r,":").concat(i)}(t.end-t.current);return Object(d.jsx)("pre",{style:{fontSize:"xx-large"},children:e})}function O(t){var e=t.addDistraction,n=t.stopActivity,c=Object(a.useState)(i.Default),r=Object(l.a)(c,2),s=r[0],u=r[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),f=b[0],O=b[1],g=Object(a.useState)(x.Internal),h=Object(l.a)(g,2),p=h[0],v=h[1],y=Object(a.useState)(""),k=Object(l.a)(y,2),S=k[0],m=k[1];switch(s){case i.Default:return Object(d.jsxs)(o.a.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return u(i.AddingDistraction)},children:"Add Distraction"}),Object(d.jsx)("button",{onClick:function(){u(i.StoppingActivity),m((new Date).toLocaleString())},children:"End Activity"})]});case i.AddingDistraction:return Object(d.jsxs)(o.a.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Distraction description...",onChange:function(t){return O(t.target.value)},value:f}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",value:x.Internal,checked:p===x.Internal,onChange:function(){return v(x.Internal)}}),"Internal"]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",value:x.External,checked:p===x.External,onChange:function(){return v(x.External)}}),"External"]}),Object(d.jsx)("button",{onClick:function(){e(f,p),u(i.Default)},children:"Add"}),Object(d.jsx)("button",{onClick:function(){return u(i.Default)},children:"Back"})]});case i.StoppingActivity:return Object(d.jsxs)(o.a.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:"Stop time...",value:S,onChange:function(t){return m(t.target.value)}}),Object(d.jsx)("button",{onClick:function(){return function(){var t=Date.parse(S);t?n(Math.floor(t/1e3)):m((new Date).toLocaleString())}()},children:"Confirm"}),Object(d.jsx)("button",{onClick:function(){return u(i.Default)},children:"Back"})]})}}!function(t){t.Personal="personal",t.Work="work"}(c||(c={})),function(t){t[t.Idle=0]="Idle",t[t.SetupFocus=1]="SetupFocus"}(r||(r={})),function(t){t[t.Default=0]="Default",t[t.AddingDistraction=1]="AddingDistraction",t[t.StoppingActivity=2]="StoppingActivity"}(i||(i={}));n(12);var g="";var h="";function p(t){var e=t.activity,n=t.currentTime,c="";c=null===e?"\ud83d\udca4":e.scheduledEnd>n?"\ud83e\udd14":"\u231b";var r,i="";return null===e?i="Idling...":e.type===v.Break?i="Relaxing...":e.type===v.Focus&&(i="Focusing on ".concat(e.goal,"...")),function(t){if(g!==t){g=t;var e=document.querySelector("link[rel=icon]");e?e.href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>".concat(g,"</text></svg>"):console.error("Could not find favicon link tag")}}(c),(r=i)!==h&&(h=r,document.title=r),Object(d.jsx)("div",{className:"Status",children:Object(d.jsx)("h1",{style:{marginBottom:0},children:"".concat(c," ").concat(h)})})}var v,x,y;function k(){return Math.floor(Date.now()/1e3)}function S(t){return 60*t}function m(t){return JSON.parse(JSON.stringify(t))}function F(t,e){return"start"!==t&&"scheduledEnd"!==t&&"end"!==t||!e?e:new Date(1e3*e).toLocaleString()}!function(t){t.Focus="focus",t.Break="break"}(v||(v={})),function(t){t.Internal="internal",t.External="external"}(x||(x={})),function(t){t.Idling="idling",t.Focusing="focusing",t.Relaxing="relaxing"}(y||(y={}));var I=void 0;var w=function(){var t,e=Object(a.useState)([]),n=Object(l.a)(e,2),c=n[0],r=n[1],i=Object(a.useState)(k()),s=Object(l.a)(i,2),u=s[0],j=s[1],g=Object(a.useState)(null),h=Object(l.a)(g,2),x=h[0],w=h[1];if(Object(a.useEffect)((function(){var t=localStorage.getItem("activities");if(t){var e=JSON.parse(t);r(e)}var n=localStorage.getItem("currentActivity");if(n){var c=JSON.parse(n);w(c)}}),[]),Object(a.useEffect)((function(){localStorage.setItem("activities",JSON.stringify(c))}),[c]),Object(a.useEffect)((function(){localStorage.setItem("currentActivity",JSON.stringify(x))}),[x]),x&&null===x.end)switch(x.type){case v.Focus:t=y.Focusing;break;case v.Break:t=y.Relaxing;break;default:console.error("Unknown activity type: ".concat(x.type)),t=y.Idling}else t=y.Idling;Object(a.useEffect)((function(){return void 0===I&&(I=window.setInterval((function(){var t=k();t>u&&j(t)}),500)),function(){window.clearInterval(I),I=void 0}}));var C=Object(a.useState)(!1),A=Object(l.a)(C,2),D=A[0],B=A[1];Object(a.useEffect)((function(){D||("granted"!==Notification.permission&&Notification.requestPermission(),B(!0))}));var E,N,J=Object(a.useState)(!1),M=Object(l.a)(J,2),P=M[0],L=M[1];switch(Object(a.useEffect)((function(){t!==y.Idling&&x&&u>x.scheduledEnd&&!P&&(new Notification("".concat(x.type," time complete"),{requireInteraction:!0}),L(!0))})),t){case y.Idling:E=Object(d.jsx)(b,{startFocus:function(t,e){var n=k(),c={start:n,end:null,scheduledEnd:n+S(25),goal:t,tags:e,type:v.Focus,distractions:[]};w(c),L(!1)},startBreak:function(t){var e=k(),n={start:e,end:null,scheduledEnd:e+S(t),type:v.Break};w(n),L(!1)},shortBreakMinutes:5,longBreakMinutes:15});break;case y.Focusing:case y.Relaxing:E=Object(d.jsx)(O,{addDistraction:function(t,e){if(x){var n=m(x);n.distractions||(n.distractions=[]),n.distractions.push({description:t,type:e}),w(n)}else console.error("trying to add a distraction when no activity is in progress")},stopActivity:function(t){if(x){var e=m(x),n=Array.from(c);e.end=t,n.push(e),r(n),w(null)}else console.error("trying to stop an activity when no activity is in progress")}});break;default:console.error("Unsupported currentState: ".concat(t)),E=Object(d.jsx)(o.a.Fragment,{})}return N=x&&t!=y.Idling?Object(d.jsx)(f,{end:x.scheduledEnd,current:u}):Object(d.jsx)(f,{end:0,current:0}),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"App-header",children:Object(d.jsx)("p",{children:"yapt: yet another pomodoro timer"})}),Object(d.jsxs)("div",{className:"App-body",children:[Object(d.jsx)(p,{activity:x,currentTime:u}),Object(d.jsxs)("div",{className:"Timer-controls",children:[N,E]}),Object(d.jsx)("hr",{}),Object(d.jsx)("h2",{children:"Current Activity"}),Object(d.jsx)("pre",{children:JSON.stringify(x,F,2)}),Object(d.jsx)("hr",{}),Object(d.jsx)("h2",{children:"Previous Activities"}),Object(d.jsx)("pre",{children:JSON.stringify(Array.from(c).reverse(),F,2)})]})]})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),i(t),a(t)}))};u.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root")),C()}],[[13,1,2]]]);
//# sourceMappingURL=main.c1d41695.chunk.js.map